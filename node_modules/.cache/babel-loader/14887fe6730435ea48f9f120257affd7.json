{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nikhi\\\\Downloads\\\\easybooking\\\\easybooking\\\\src\\\\components\\\\MyAppointment.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MyAppointments = _ref => {\n  _s();\n\n  let {\n    bookedAppointments,\n    setBookedAppointments\n  } = _ref;\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    fetchMyBookedTimeSlots();\n  }, []);\n\n  const fetchMyBookedTimeSlots = async () => {\n    try {\n      const response = await fetch('/my-booked-time-slots', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n\n      if (response.ok) {\n        setBookedAppointments(data.bookedTimeSlots);\n      } else {\n        console.error(data.message);\n      }\n\n      setIsLoading(false);\n    } catch (error) {\n      console.error(error);\n      setIsLoading(false);\n    }\n  };\n\n  const handleCancelBooking = async bookingId => {\n    try {\n      const response = await fetch(`/cancel-booking/${bookingId}`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      const data = await response.json();\n\n      if (response.ok) {\n        // Remove the canceled booking from the state\n        setBookedAppointments(prevAppointments => prevAppointments.filter(appointment => appointment._id !== bookingId));\n      } else {\n        console.error(data.message);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mb-4\",\n      children: \"My Appointments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group\",\n      children: bookedAppointments.map(appointment => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: [`${appointment.startTime} - ${appointment.endTime}, ${appointment.year}-${appointment.month}-${appointment.day}`, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => handleCancelBooking(appointment._id),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this)]\n      }, appointment._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MyAppointments, \"Yt82d/dvZsn5nYh5sqDQjv+rJ38=\");\n\n_c = MyAppointments;\nexport default MyAppointments;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyAppointments\");","map":{"version":3,"sources":["C:/Users/nikhi/Downloads/easybooking/easybooking/src/components/MyAppointment.tsx"],"names":["React","useEffect","useState","MyAppointments","bookedAppointments","setBookedAppointments","isLoading","setIsLoading","fetchMyBookedTimeSlots","response","fetch","headers","localStorage","getItem","data","json","ok","bookedTimeSlots","console","error","message","handleCancelBooking","bookingId","method","prevAppointments","filter","appointment","_id","map","startTime","endTime","year","month","day"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\ninterface BookedTimeSlot {\r\n  _id: string;\r\n  year: number;\r\n  month: number;\r\n  day: number;\r\n  startTime: string;\r\n  endTime: string;\r\n}\r\n\r\ninterface MyAppointmentsProps {\r\n  bookedAppointments: BookedTimeSlot[];\r\n  setBookedAppointments: React.Dispatch<React.SetStateAction<BookedTimeSlot[]>>;\r\n}\r\n\r\nconst MyAppointments: React.FC<MyAppointmentsProps> = ({ bookedAppointments, setBookedAppointments }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchMyBookedTimeSlots();\r\n  }, []);\r\n\r\n  const fetchMyBookedTimeSlots = async () => {\r\n    try {\r\n      const response = await fetch('/my-booked-time-slots', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      \r\n      if (response.ok) {\r\n        setBookedAppointments(data.bookedTimeSlots);\r\n      } else {\r\n        console.error(data.message);\r\n      }\r\n      \r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelBooking = async (bookingId: string) => {\r\n    try {\r\n      const response = await fetch(`/cancel-booking/${bookingId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      \r\n      if (response.ok) {\r\n        // Remove the canceled booking from the state\r\n        setBookedAppointments(prevAppointments => prevAppointments.filter(appointment => appointment._id !== bookingId));\r\n      } else {\r\n        console.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2 className=\"text-center mb-4\">My Appointments</h2>\r\n      {isLoading ? (\r\n        <p>Loading...</p>\r\n      ) : (\r\n        <ul className=\"list-group\">\r\n          {bookedAppointments.map(appointment => (\r\n            <li key={appointment._id} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n              {`${appointment.startTime} - ${appointment.endTime}, ${appointment.year}-${appointment.month}-${appointment.day}`}\r\n              <button\r\n                className=\"btn btn-danger\"\r\n                onClick={() => handleCancelBooking(appointment._id)}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyAppointments;"]},"metadata":{},"sourceType":"module"}